<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link href="Articles.css" rel="stylesheet" /> -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="http://fonts.cdnfonts.com/css/agency-fb?styles=17318"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Zen Maru Gothic:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Playfair Display:300,400,500,700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.css"
      rel="stylesheet"
    />

    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    
  </head>

<body>
    <nav class="navbar navbar-light bg-black">
        <div class="container justify-content-center">
          <a class="navbar-brand" href="https://voice24.org/index.html">
            <img
              src="logo2.png"
              height="40"
              alt="MDB Logo"
              loading="lazy"
            />
          </a>
        </div>
      </nav>
      <div class="container mt-4" >
       
   
        <!-- 2 column grid layout with text inputs for the first and last names -->
        <h1>Posts</h1>

      
        <!-- Email input -->
      

        <!-- Text input -->
        

          <select class="select w-100 mb-4 form-control" id="inlineFormSelectPref" placeholder="Categories">
            <option value="">Select Category</option>
            <option value="Government">Government</option>
            <option value="Buisnesses">Buisnesses</option>
            <option value="Public">Public</option>
            <option value="Sports">Sports</option>
            <option value="Humanitarian">Humanitarian</option>
            <option value="Newsroom">Newsroom</option>
            <option value="Talkshow">Talkshow</option>
            <option value="Explains">Explains</option>
            <option value="Films">Films</option>
            <option value="Explore">Explore</option>
            <option value="Persuit">Persuit</option>
          </select>
       
            <!-- Default radio -->
            <select class="select w-100 mb-4 form-control" id="flexRadioDefault1" placeholder="Type">
              <option value="">Select Type</option>
              <option value="Normal">Normal</option>
              <option value="Trending">Trending</option>
            </select>
            <label class="form-label " for="customFile">Trending Pic</label>
            <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile" /></div>
            <label class="form-label " for="customFile22">NearBy Pic</label>
            <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile22" /></div>
            <label class="form-label " for="customFile21">Card Pic</label>
            <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile21" /></div>
            
    
      
        <!-- photo input -->
        <label class="form-label " for="customFile1">Category Pic</label>
        
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile1" /></div> 
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile2" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile3" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile4" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile5" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile6" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile7" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile8" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile9" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile10" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile11" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile12" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile13" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile14" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile15" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile16" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile17" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile18" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile19" /></div>
          <div class="form-outline mb-4"><input type="file" class="form-control" id="customFile20" /></div>

          
          <div class="form-outline mb-4">
            <input type="text" id="form6Example3" class="form-control" />
            <label class="form-label" for="form6Example3">Alt Text</label>
          </div>

          
        
        <!-- Message input -->
        <div class="form-outline mb-5">
          <textarea class="form-control" id="form6Example9" rows="2"></textarea>
          <label class="form-label" for="form6Example9">Title </label>
          <div class="form-helper">Keep within 15 words </div>
        </div>

        <div class="form-outline mb-4">
          <textarea class="form-control" id="form6Example7" rows="8"></textarea>
          <label class="form-label" for="form6Example7">Body </label>
        </div>

        <div class="form-outline mb-4">
          <input type="text" id="form6Example45" class="form-control" />
          <label class="form-label" for="form6Example45">Hashtags</label>
        </div>

        <!-- Odisha-->
<select id="city" name="city" class="form-control mb-4">
  <option value="">Select location</option>
  <option value="Angul">Angul</option>
  <option value="Angul District">Angul District</option>
  <option value="Asika">Asika</option>
  <option value="Athagarh">Athagarh</option>
  <option value="Bada Barabil">Bada Barabil</option>
  <option value="Balangir">Balangir</option>
  <option value="Balasore">Balasore</option>
  <option value="Baleshwar">Baleshwar</option>
  <option value="Balimila">Balimila</option>
  <option value="Balugaon">Balugaon</option>
  <option value="Banapur">Banapur</option>
  <option value="Banki">Banki</option>
  <option value="Banposh">Banposh</option>
  <option value="Baragarh">Baragarh</option>
  <option value="Barbil">Barbil</option>
  <option value="Bargarh">Bargarh</option>
  <option value="Barpali">Barpali</option>
  <option value="Basudebpur">Basudebpur</option>
  <option value="Baud">Baud</option>
  <option value="Baudh">Baudh</option>
  <option value="Belaguntha">Belaguntha</option>
  <option value="Bhadrak">Bhadrak</option>
  <option value="Bhadrakh">Bhadrakh</option>
  <option value="Bhanjanagar">Bhanjanagar</option>
  <option value="Bhawanipatna">Bhawanipatna</option>
  <option value="Bhuban">Bhuban</option>
  <option value="Bhubaneshwar">Bhubaneshwar</option>
  <option value="Binka">Binka</option>
  <option value="Birmitrapur">Birmitrapur</option>
  <option value="Bolanikhodan">Bolanikhodan</option>
  <option value="Brahmapur">Brahmapur</option>
  <option value="Brajarajnagar">Brajarajnagar</option>
  <option value="Buguda">Buguda</option>
  <option value="Burla">Burla</option>
  <option value="Champua">Champua</option>
  <option value="Chandbali">Chandbali</option>
  <option value="Chatrapur">Chatrapur</option>
  <option value="Chikitigarh">Chikitigarh</option>
  <option value="Chittarkonda">Chittarkonda</option>
  <option value="Cuttack">Cuttack</option>
  <option value="Daitari">Daitari</option>
  <option value="Deogarh">Deogarh</option>
  <option value="Dhenkanal">Dhenkanal</option>
  <option value="Digapahandi">Digapahandi</option>
  <option value="Gajapati">Gajapati</option>
  <option value="Ganjam">Ganjam</option>
  <option value="Gopalpur">Gopalpur</option>
  <option value="Gudari">Gudari</option>
  <option value="Gunupur">Gunupur</option>
  <option value="Hinjilikatu">Hinjilikatu</option>
  <option value="Hirakud">Hirakud</option>
  <option value="Jagatsinghapur">Jagatsinghapur</option>
  <option value="Jagatsinghpur">Jagatsinghpur</option>
  <option value="Jajpur">Jajpur</option>
  <option value="Jaleshwar">Jaleshwar</option>
  <option value="Jatani">Jatani</option>
  <option value="Jeypore">Jeypore</option>
  <option value="Jharsuguda">Jharsuguda</option>
  <option value="Jharsuguda District">Jharsuguda District</option>
  <option value="Kaintragarh">Kaintragarh</option>
  <option value="Kalahandi">Kalahandi</option>
  <option value="Kamakhyanagar">Kamakhyanagar</option>
  <option value="Kandhamal">Kandhamal</option>
  <option value="Kantabanji">Kantabanji</option>
  <option value="Kantilo">Kantilo</option>
  <option value="Kendrapara">Kendrapara</option>
  <option value="Kendraparha">Kendraparha</option>
  <option value="Kendujhar">Kendujhar</option>
  <option value="Kesinga">Kesinga</option>
  <option value="Khallikot">Khallikot</option>
  <option value="Kharhial">Kharhial</option>
  <option value="Khordha">Khordha</option>
  <option value="Khurda">Khurda</option>
  <option value="Kiri Buru">Kiri Buru</option>
  <option value="Kodala">Kodala</option>
  <option value="Konarka">Konarka</option>
  <option value="Koraput">Koraput</option>
  <option value="Kuchaiburi">Kuchaiburi</option>
  <option value="Kuchinda">Kuchinda</option>
  <option value="Malakanagiri">Malakanagiri</option>
  <option value="Malkangiri">Malkangiri</option>
  <option value="Mayurbhanj">Mayurbhanj</option>
  <option value="Nabarangpur">Nabarangpur</option>
  <option value="Nayagarh">Nayagarh</option>
  <option value="Nayagarh District">Nayagarh District</option>
  <option value="Nilgiri">Nilgiri</option>
  <option value="Nimaparha">Nimaparha</option>
  <option value="Nowrangapur">Nowrangapur</option>
  <option value="Nuapada">Nuapada</option>
  <option value="Padampur">Padampur</option>
  <option value="Paradip Garh">Paradip Garh</option>
  <option value="Patamundai">Patamundai</option>
  <option value="Patnagarh">Patnagarh</option>
  <option value="Phulbani">Phulbani</option>
  <option value="Pipili">Pipili</option>
  <option value="Polasara">Polasara</option>
  <option value="Puri">Puri</option>
  <option value="Purushottampur">Purushottampur</option>
  <option value="Rambha">Rambha</option>
  <option value="Raurkela">Raurkela</option>
  <option value="Rayagada">Rayagada</option>
  <option value="Remuna">Remuna</option>
  <option value="Rengali">Rengali</option>
  <option value="Sambalpur">Sambalpur</option>
  <option value="Sonepur">Sonepur</option>
  <option value="Sorada">Sorada</option>
  <option value="Soro">Soro</option>
  <option value="Subarnapur">Subarnapur</option>
  <option value="Sundargarh">Sundargarh</option>
  <option value="Talcher">Talcher</option>
  <option value="Tarabha">Tarabha</option>
  <option value="Titlagarh">Titlagarh</option>
  <option value="Udayagiri">Udayagiri</option>
</select>
<div class="form-outline mb-4">
  <input type="text" id="form6Example5" class="form-control" />
  <label class="form-label" for="form6Example5">subtitle</label>
</div>
<div class="form-outline mb-4">
  <input type="text" id="form6Example6" class="form-control" />
  <label class="form-label" for="form6Example6">YouTube Link</label>
</div>

        <button type="submit" class="btn btn-primary btn-block mb-4 " onclick="create_post()">Submit</button>
       

    </div>


  




    

</body>
<script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.js"
    ></script>
   <script>
    const HOST_API_URL = "https://voice24.org";
    const POST_API_URL = `${HOST_API_URL}/api/post`;
    const BILLBOARD_API_URL = `${HOST_API_URL}/api/billboard`;
    const UPLOAD_API_URL = `${HOST_API_URL}/api/upload`;
    const STATIC_API_URL = `${HOST_API_URL}/public`;
    const AUTHOR_API_URL = `${HOST_API_URL}/api/author`;
    const ADMIN_API_URL = `${HOST_API_URL}/api/admin`;
    let photo_global_arr = []
    function prepareTags(tagString) {
    let tags  = tagString.split(' ');
    return tags;
}
    const getHeaders = () => {
            return {
                "Content-Type": "application/json",
                "x-access-token": localStorage.getItem('jwt')
            }
        }
        function sleep(ms) {
               return new Promise(resolve => setTimeout(resolve, ms));
        }
        async function get_url(id) {
            let file = document.getElementById(id).files[0];
            let url = null;
            if(file) {
              let data = new FormData();
              data.append("image", file);
             let res = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data});
             await sleep(1000);
             let photo = await res.json();
             photo_global_arr.push(HOST_API_URL+'/public/images/'+photo.content);  
            }
            
        }
        async function get_imgs() {

          for(let i=1;i<=20;i++) {
            let id = 'customFile'+i;
            await get_url(id);     
          }
 
        }
    async function create_post() {
        let title = document.getElementById("form6Example9").value;
        let subtitle= document.getElementById("form6Example5").value;
        let caption= document.getElementById("form6Example3").value;
        let type= document.getElementById("flexRadioDefault1").value;
        let category= document.getElementById("inlineFormSelectPref").value;
        let location= document.getElementById("city").value;
        let body= document.getElementById("form6Example7").value;
        let hashtags= document.getElementById("form6Example45").value;
        let bussinessLink= document.getElementById("form6Example6").value;
        let file1= document.getElementById("customFile").files[0];
        const body1 = new FormData();
        body1.append("image", file1);
        let res1 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: body1});
        let photo1 = await res1.json();
        let img_url1 = HOST_API_URL+'/public/images/'+photo1.content;
        let file2= document.getElementById("customFile21").files[0];
        const body2 = new FormData();
        body2.append("image", file2);
        let res2 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: body2});
        let photo2 = await res2.json();
        let img_url2 = HOST_API_URL+'/public/images/'+photo2.content;
        let file3= document.getElementById("customFile22").files[0];
        const body3 = new FormData();
        body3.append("image", file3);
        let res4 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: body3});
        let photo4 = await res4.json();
        let img_url3 = HOST_API_URL+'/public/images/'+photo4.content;
  
       await get_imgs();
       await sleep(5000);
        let tagArr = prepareTags(hashtags);
        let post = {
            title: title,
            subtitle: subtitle,
            caption: caption,
            type: type,
            category: category,
            location: location,
            body: body,
            hashtags: tagArr,
            bussinessLink: bussinessLink,
            photo: photo_global_arr,
            pic: img_url1,
            cover: img_url2,
            near: img_url3
        }
        photo_global_arr = []
        let res3 = await fetch(POST_API_URL, { method: 'POST' , headers : getHeaders(), body: JSON.stringify(post)});
        let post_details = await res3.json();
        alert(post_details.message);
        if(post_details?.status == 'success'){
          document.location = 'index.html';
        }
        
    }
    async function login_check() {
      let res = await fetch(ADMIN_API_URL+'/isAdmin', { method: 'GET', headers : getHeaders() });
        let author = await res.json() ;
      let isAdmin = author?.content?.isAdmin;
        let email = localStorage.getItem("email");
        if(author?.status == 'success') {
          if(isAdmin) {
            console.log("logedin successful");
          }else {
            alert("You are not autherized");
            document.location = 'index.html';
          }
        } else {
          alert("Please login");
          localStorage.clear();
          document.location = 'index.html';
        }
    }
    login_check()
   </script>

  

  </body>
</html>

