<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link href="Articles.css" rel="stylesheet" /> -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="http://fonts.cdnfonts.com/css/agency-fb?styles=17318"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Zen Maru Gothic:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Playfair Display:300,400,500,700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.css"
      rel="stylesheet"
    />

    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

    
  </head>

<body>
    <nav class="navbar navbar-light bg-black">
        <div class="container justify-content-center">
          <a class="navbar-brand" href="#">
            <img
              src="logo2.png"
              height="40"
              alt="MDB Logo"
              loading="lazy"
            />
          </a>
        </div>
      </nav>
        <div class="container mt-4">
          
      <label class="form-label " for="customFile">Cover Image</label>
        <div class="form-outline mb-4 ">
          <input type="file" class="form-control" id="customFile" />
          </div> 
      <label class="form-label " for="customFile1">Icon Image</label>
        <div class="form-outline mb-4">
          <input type="file" class="form-control" id="customFile1" />
          </div>
    
          <div class="form-outline mb-4">
            <input type="text" id="form6Example" class="form-control" />
            <label class="form-label" for="form6Example">Company Name</label>
          </div> 
          <div class="form-outline mb-4">
            <input type="text" id="form6Example1" class="form-control" />
            <label class="form-label" for="form6Example1">Category of company</label>
          </div> 
          <div class="form-outline mb-4">
            <input type="text" id="form6Example2" class="form-control" />
            <label class="form-label" for="form6Example2">Location(City, State, Country)</label>
          </div>
          <div class="form-outline mb-4">
            <input type="text" id="form6Example3" class="form-control" />
            <label class="form-label" for="form6Example3">Google maps embed link</label>
          </div>
          <div class="form-outline mb-4">
            <textarea class="form-control" id="form6Example4" rows="4"></textarea>
            <label class="form-label" for="form6Example4">Business details </label>
          </div>
       
        <div class="form-outline mb-4">
            <input type="number" id="form6Example5" class="form-control" />
            <label class="form-label" for="form6Example5">Phone No.</label>
          </div>
        <div class="form-outline mb-4">
            <input type="email" id="form6Example6" class="form-control" />
            <label class="form-label" for="form6Example6">Email</label>
          </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example7" class="form-control" />
            <label class="form-label" for="form6Example7">Owner's Name</label>
          </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example8" class="form-control" />
            <label class="form-label" for="form6Example8">Position</label>
          </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example9" class="form-control " rows="3"/>
            <label class="form-label" for="form6Example9">About</label>
          </div>
          <div class="form-outline mb-4">
            <input type="number" id="form6Example10" class="form-control"/>
            <label class="form-label" for="form6Example10">Phone No.</label>
          </div>
          <label class="form-label " for="customFile2">profile</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile2" />
            </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example11" class="form-control" />
            <label class="form-label" for="form6Example11">Co-Owner's Name</label>
          </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example12" class="form-control" />
            <label class="form-label" for="form6Example12">Position</label>
          </div>
        <div class="form-outline mb-4">
            <input type="text" id="form6Example13" class="form-control " rows="3"/>
            <label class="form-label" for="form6Example13">About</label>
          </div>
          <div class="form-outline mb-4">
            <input type="number" id="form6Example14" class="form-control"/>
            <label class="form-label" for="form6Example14">Phone No.</label>
          </div>
          <label class="form-label " for="customFile3">profile</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile3" />
            </div> 
          <label class="form-label " for="customFile4">Image 1</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile4" />
            </div> 
          <label class="form-label " for="customFile5">Image 2</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile5" />
            </div> 
          <label class="form-label " for="customFile6">Image 3</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile6" />
            </div> 
          <label class="form-label " for="customFile7">Image 4</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile7" />
            </div> 
          <label class="form-label " for="customFile8">Image 5</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile8" />
            </div> 
          <label class="form-label " for="customFile9">Image 6</label>
          <div class="form-outline mb-4">
            <input type="file" class="form-control" id="customFile9" />
            </div>  
            <button type="submit" class="btn btn-primary btn-block mb-4 " onclick="create_brand()">Submit</button>
        
        </div>
    </body> 
    <script
          type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.js"
        ></script>
    
       <script>
        function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}
    const HOST_API_URL = "http://localhost:8000";
    const BRAND_API_URL = `${HOST_API_URL}/api/brand`;
    const BILLBOARD_API_URL = `${HOST_API_URL}/api/billboard`;
    const UPLOAD_API_URL = `${HOST_API_URL}/api/upload`;
    const STATIC_API_URL = `${HOST_API_URL}/public`;
    const AUTHOR_API_URL = `${HOST_API_URL}/api/author`;
    const ADMIN_API_URL = `${HOST_API_URL}/api/admin`;

    const getHeaders = () => {
            return {
                "Content-Type": "application/json",
                "x-access-token": localStorage.getItem('jwt')
            }
        }
         async function create_brand() {
          let cover_file = document.getElementById("customFile").files[0];
          const data1 = new FormData();
          data1.append("image", cover_file);
          let res1 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data1});
          
          let photo1 = await res1.json();
         
          let cover = HOST_API_URL+'/public/images/'+photo1.content;
          let icon_file = document.getElementById("customFile1").files[0];
          const data2 = new FormData();
          data2.append("image", icon_file);
          let res2 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data2});
      
          let photo2 = await res2.json();
          let icon = HOST_API_URL+'/public/images/'+photo2.content;
          let name = document.getElementById("form6Example").value;
          let category = document.getElementById("form6Example1").value;
          let location = document.getElementById("form6Example2").value;
          let map_link =  document.getElementById("form6Example3").value;
          let detail = document.getElementById("form6Example4").value;
          let phone = document.getElementById("form6Example5").value;
          let email = document.getElementById("form6Example6").value;
          let owner1 = document.getElementById("form6Example7").value;
          let position1 = document.getElementById("form6Example8").value;
          let about1 = document.getElementById("form6Example9").value;
          let phone1 = document.getElementById("form6Example10").value;
          let profile1_file = document.getElementById("customFile2").files[0];
          const data3 = new FormData();
          data3.append("image", profile1_file);
          let res3 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data3});
          let photo3 = await res3.json();
          
          let profile1 = HOST_API_URL+'/public/images/'+photo3.content;
          let owner2 = document.getElementById("form6Example11").value;
          let position2 = document.getElementById("form6Example12").value;
          let about2 = document.getElementById("form6Example13").value;
          let phone2 = document.getElementById("form6Example14").value;
          let profile2_file = document.getElementById("customFile3").files[0];
          const data4 = new FormData();
          data4.append("image", profile2_file);
          let res4 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data4});
          let photo4 = await res4.json();
          
          let profile2 = HOST_API_URL+'/public/images/'+photo4.content;
          let img1_file = document.getElementById("customFile4").files[0];
         
          const data5 = new FormData();
          data5.append("image", img1_file);
          let res5 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data5});
          let photo5 = await res5.json();
          let img1 = HOST_API_URL+'/public/images/'+photo5.content;
          let img2_file = document.getElementById("customFile5").files[0];
         
          const data6 = new FormData();
          data6.append("image", img2_file);
          let res6 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data6});
          let photo6 = await res6.json();
          let img2 = HOST_API_URL+'/public/images/'+photo6.content;
          let img3_file = document.getElementById("customFile6").files[0];
          
          const data7 = new FormData();
          data7.append("image", img3_file);
          let res7 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data7});
          let photo7 = await res7.json();
          let img3 = HOST_API_URL+'/public/images/'+photo7.content;
          let img4_file = document.getElementById("customFile7").files[0];
          
          const data8 = new FormData();
          data8.append("image", img4_file);
          let res8 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data8});
          let photo8 = await res8.json();
          let img4 = HOST_API_URL+'/public/images/'+photo8.content;
          let img5_file = document.getElementById("customFile8").files[0];
          
          const data9 = new FormData();
          data9.append("image", img5_file);
          let res9 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data9});
          let photo9 = await res9.json();
          let img5 = HOST_API_URL+'/public/images/'+photo9.content;
          let img6_file = document.getElementById("customFile9").files[0];
          
          const data10 = new FormData();
          data10.append("image", img6_file);
          let res10 = await fetch(UPLOAD_API_URL, { method: 'POST' , body: data10});
          let photo10 = await res10.json();
          let img6 = HOST_API_URL+'/public/images/'+photo10.content;

          let brand = {
          cover: cover,
          icon: icon,
          name: name,
          category: category,
          location: location,
          map: map_link,
          detail: detail,
          phone: phone,
          email: email,
          owner1: owner1,
          position1: position1,
          about1: about1,
          phone1: phone1,
          profile1: profile1,
          owner2: owner2,
          position2: position2,
          about2: about2,
          phone2: phone2,
          profile2: profile2,
          img1: img1,
          img2: img2,
          img3: img3,
          img4: img4,
          img5: img5,
          img6: img6
         }
         let res = await fetch(BRAND_API_URL, { method: 'POST' , headers : getHeaders(), body: JSON.stringify(brand)});
        let brand_details = await res.json();
        alert(brand_details?.message);
        if(brand_details?.status == 'success') {
          document.location = 'index.html';
        }
         }

         async function login_check() {
      let res = await fetch(ADMIN_API_URL+'/isAdmin', { method: 'GET', headers : getHeaders() });
        let author = await res.json() ;
      let isAdmin = author?.content?.isAdmin;
        let email = localStorage.getItem("email");
        if(author?.status == 'success') {
          if(isAdmin) {
            console.log("login successful");
          }else {
            alert("You are not authorized");
            document.location = 'index.html';
          }
        } else {
          alert("Please login");
          localStorage.clear();
          document.location = 'index.html';
        }
    }
    login_check()
       </script>
      </body>
    </html>